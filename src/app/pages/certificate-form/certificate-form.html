<div class="flex flex-col items-center">
  <!-- TITLE -->
  <div class="flex flex-col items-center gap-1 mb-8">
    <h1 class="text-gray-300 text-2xl font-bold">Geração de certificado</h1>

    <span class="text-gray-200 text-sm">
      Preencha os dados para gerar um novo certificado
    </span>
  </div>

  <!-- FORM -->
  <form
    novalidate
    #form="ngForm"
    class="w-full flex flex-col gap-8 border border-gray-100 rounded-lg p-8 max-w-2xl"
  >
    <!-- CONTENT -->
    <div class="flex flex-col gap-5">
      <h2 class="text-blue-dark text-lg font-bold">Novo certificado</h2>

      <fieldset class="group flex flex-col gap-2">
        <label
          for="student-name"
          class="text-blue-dark text-sm font-medium group-focus-within:text-blue-base"
          [ngClass]="{
            'text-danger-dark': isFieldInvalid(studentNameRef)
          }"
        >
          Nome completo
        </label>

        <input
          type="text"
          id="student-name"
          name="student-name"
          placeholder="Digite o nome completo do aluno"
          class="px-3 py-2 border border-gray-100 rounded-md text-base text-gray-300 placeholder:text-gray-200 transition-colors focus:outline-none focus:border-blue-base"
          [(ngModel)]="certificate.studentName"
          #studentNameRef="ngModel"
          maxlength="150"
          required=""
        >
        @if(isFieldInvalid(studentNameRef)) {
        <div class="flex flex-row items-center gap-1 text-danger-dark">
          <i class="ph ph-warning-circle text-base"></i>

          <span class="text-xs"> O campo nome completo é obrigatório </span>
        </div>
        }
      </fieldset>

      <div class="flex flex-col gap-2 md:flex-row md:items-end">
        <fieldset class="group flex flex-col gap-2 flex-1">
          <label
            for="activity-name"
            class="text-blue-dark text-sm font-medium group-focus-within:text-blue-base"
          >
            Atividade
          </label>

          <input
            type="text"
            id="activity-name"
            name="activity-name"
            placeholder="Digite o título da atividade"
            class="px-3 py-2 border border-gray-100 rounded-md text-base text-gray-300 placeholder:text-gray-200 transition-colors focus:outline-none focus:border-blue-base"
            [(ngModel)]="activityName"
            maxlength="150"
            required
          >
        </fieldset>

        <app-secondary-button
          label="Adicionar"
          phClass="ph-plus"
          [disabled]="!activityName"
          (click)="addActivity()"
        ></app-secondary-button>
      </div>

      <!-- ACTIVITIES LIST -->
      <div class="flex flex-col gap-2">
        <label class="text-blue-dark text-sm font-medium">
          Lista de atividades
        </label>

        <div class="p-4 border border-gray-100 rounded-lg">
          @for (item of certificate.activities; track $index) {<!-- ITEM -->
          <div class="flex items-center">
            <span class="flex-1 text-gray-300 text-base">{{ item }}</span>

            <button
              (click)="removeActivity($index)"
              type="button"
              class="size-6 flex items-center justify-center rounded-sm transition-colors hover:bg-gray-100"
            >
              <i class="ph ph-x text-xl text-danger-base"></i>
            </button>
          </div>
          <!-- DIVIDER -->
          @if(certificate.activities.length - 1 !== $index) {
          <div class="w-full h-px bg-gray-100 my-3"></div>} }
        </div>
      </div>
    </div>

    <app-primary-button
      label="Gerar certificado"
      [disabled]="isFormInvalid()"
      (click)="onSubmit()"
    ></app-primary-button>
  </form>
</div>
